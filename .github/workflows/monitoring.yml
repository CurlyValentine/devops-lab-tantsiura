name: Monitoring Simulation

on:
  push:
    branches: ["main"]

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Show Prometheus config
        run: |
          echo "ðŸ“„ Prometheus configuration file found:"
          cat prometheus/prometheus.yml

      - name: Simulate Node Exporter run
        run: |
          echo "ðŸš€ Starting Node Exporter container (simulated)..."
          echo "âœ… Node Exporter running on port 9100"

      - name: Simulate Prometheus run
        run: |
          echo "ðŸš€ Starting Prometheus container (simulated)..."
          echo "âœ… Prometheus running on port 9090"
          echo "âœ… Configuration file loaded successfully"

      - name: Simulate Grafana run
        run: |
          echo "ðŸš€ Starting Grafana container (simulated)..."
          echo "âœ… Grafana running on port 3000"
          echo "âœ… Login: admin / Password: admin"
          echo "âœ… Data source 'Prometheus' added (URL: http://prometheus:9090)"
          echo "âœ… Dashboard created with metric: node_cpu_seconds_total"

      - name: Final verification
        run: |
          echo "ðŸŸ¢ All simulated services are running"
          echo "Prometheus â†’ localhost:9090"
          echo "Grafana â†’ localhost:3000"
          echo "Node Exporter â†’ localhost:9100"
